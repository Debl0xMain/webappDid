
    $('#submit_email').on('click', function(e) {
        e.preventDefault();
        var email = $('#email').val().trim();
        $('#success_request').html('');

        if(email === ''){
            showErrorMessage('Email non valide', 'red');
            return;
        }

        if(!isValidEmail(email)) {
            showErrorMessage('Format d\'email non valide', 'red');
            return;
        }

        $.ajax({
            url: "/add-email",
            type: "POST",
            data: { email: email },
            success: function(data) {
                if (data === 'Email added successfully!' || data === 'Email already exists.') {
                    showSuccessMessage('Vous êtes abonné', 'green');
                } else if (data === 'Invalid email format.') {
                    showErrorMessage('Email non valide', 'red');
                } else {
                    showErrorMessage('Erreur lors de l\'abonnement', 'red');
                }
            },
            error: function(xhr, status, error) {
                showErrorMessage('Erreur lors de l\'abonnement', 'red');
            }
        });
    });

    function showSuccessMessage(message, color) {
        $('#success_request').html('<div>' + message + '</div>');
        $('#success_request').css('color', color);
        setTimeout(function(){
            $('#success_request').html('');
        }, 10000);
    }

    function showErrorMessage(message, color) {
        $('#success_request').html('<div>' + message + '</div>');
        $('#success_request').css('color', color);
        setTimeout(function(){
            $('#success_request').html('');
        }, 10000);
    }

    function isValidEmail(email) {
        // Utilisez une expression régulière pour valider le format de l'email
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

