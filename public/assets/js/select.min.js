
$(document).ready(function() {
    $('.marqueCheckbox').click(function() {
        var checkedMarqueIds = $('.marqueCheckbox:checked').map(function() {
            return this.value;
        }).get();

        $.ajax({
            url: '/select_m',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ ids: checkedMarqueIds }),
            success: function(data) {
                generateMotosHTML(data);
            },
            error: function(xhr, textStatus, errorThrown) {
                var motosList = $('#motosList');
                motosList.empty();
                test()
            }
        });
    });
});
const test = () => {
    $.ajax({
        url: '/select_a',
        method: 'POST',
        dataType: 'json',
        success: function(data) {
            generateMotosHTML(data);
        },
        error: function(xhr, textStatus, errorThrown) {
            console.error('Erreur lors de la requÃªte Ajax : ' + textStatus, errorThrown);
        }
    });
}
function generateMotosHTML(motosData) {
    console.log(motosData);
    var motosList = $('#moto_list'); 
    motosList.empty();

    $.each(motosData, function(index, moto) {
        var section = $('<section>').addClass('col my-3 border');
        var row = $('<div>').addClass('row').appendTo(section);
        var imgCol = $('<div>').addClass('col').appendTo(row);
        $('<img>').addClass('img_ocass').attr('src','assets/img/' + moto.motoPicture).attr('alt', moto.motoName).appendTo(imgCol);
        var infoCol = $('<div>').addClass('col').appendTo(row);

        $('<div>').addClass('row').append($('<p>').addClass('text_ocass').text(moto.id)).appendTo(infoCol);
        $('<div>').addClass('row').append($('<p>').addClass('text_ocass').text(moto.motoName)).appendTo(infoCol);
        $('<div>').addClass('row').append($('<p>').addClass('text_ocass').text(moto.marque)).appendTo(infoCol);
        $('<div>').addClass('row').append($('<p>').addClass('text_ocass').text(moto.motoYear)).appendTo(infoCol);
        $('<div>').addClass('row').append($('<p>').addClass('text_ocass').text(moto.motoDesc)).appendTo(infoCol);
        $('<div>').addClass('row').append($('<p>').addClass('text_ocass').text(moto.motoPrice)).appendTo(infoCol);

        var optionsList = $('<ul>');
        moto.motoOption.forEach(function(option) {
            $('<li>').addClass('text_ocass').text(option).appendTo(optionsList);
        });
        $('<div>').addClass('row').append(optionsList).appendTo(infoCol);

        motosList.append(section);
    });
}



